import{_ as m}from"./app-faf52816.js";import{a as v}from"./artplayer-plugin-danmuku-24b797d2.js";import{a4 as h,_ as b,$ as C,a2 as s,a3 as n,a0 as l,a6 as g,a5 as t,F as B}from"./framework-2eced249.js";import"./commonjsHelpers-725317a4.js";import"./commonjs-dynamic-modules-302442b1.js";const E={href:"https://github.com/zhw2590582/ArtPlayer",target:"_blank",rel:"noopener noreferrer"},_={class:"hint-container tip"},D=s("p",{class:"hint-container-title"},"提示",-1),f=s("code",null,"ArtPlayer",-1),q={href:"https://github.com/zhw2590582/ArtPlayer",target:"_blank",rel:"noopener noreferrer"},k={href:"https://artplayer.org/document/",target:"_blank",rel:"noopener noreferrer"},P=s("h2",{id:"案例",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#案例","aria-hidden":"true"},"#"),n(" 案例")],-1),x=s("p",null,"一个视频播放器:",-1),I=t(`<div class="language-markdown" data-ext="md"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;ArtPlayer src=&quot;https://mse-demo.u2sb.com/caminandes_03_llamigos_720p.mp4&quot; /&gt;</span></span>
<span class="line"></span></code></pre></div><p>一个包含了封面的播放器:</p>`,2),w=t(`<div class="language-markdown" data-ext="md"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;ArtPlayer</span></span>
<span class="line"><span style="color:#ABB2BF;">  src=&quot;https://mse-demo.u2sb.com/caminandes_03_llamigos_720p.mp4&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">  poster=&quot;/poster.svg&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"></span></code></pre></div><p>一个包含自定义设置的播放器:</p>`,2),M=t(`<div class="language-markdown line-numbers-mode" data-ext="md"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;ArtPlayer</span></span>
<span class="line"><span style="color:#ABB2BF;">  src=&quot;https://mse-demo.u2sb.com/caminandes_03_llamigos_720p.mp4&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">  airplay</span></span>
<span class="line"><span style="color:#ABB2BF;">  aspect-ratio</span></span>
<span class="line"><span style="color:#ABB2BF;">  auto-size</span></span>
<span class="line"><span style="color:#ABB2BF;">  auto-orientation</span></span>
<span class="line"><span style="color:#ABB2BF;">  auto-playback</span></span>
<span class="line"><span style="color:#ABB2BF;">  fast-forward</span></span>
<span class="line"><span style="color:#ABB2BF;">  flip</span></span>
<span class="line"><span style="color:#ABB2BF;">  fullscreen-web</span></span>
<span class="line"><span style="color:#ABB2BF;">  lock</span></span>
<span class="line"><span style="color:#ABB2BF;">  loop</span></span>
<span class="line"><span style="color:#ABB2BF;">  is-live</span></span>
<span class="line"><span style="color:#ABB2BF;">  muted</span></span>
<span class="line"><span style="color:#ABB2BF;">  mini-progress-bar</span></span>
<span class="line"><span style="color:#ABB2BF;">  pip</span></span>
<span class="line"><span style="color:#ABB2BF;">  screenshot</span></span>
<span class="line"><span style="color:#ABB2BF;">  subtitle-offset</span></span>
<span class="line"><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="属性" tabindex="-1"><a class="header-anchor" href="#属性" aria-hidden="true">#</a> 属性</h2><h3 id="src" tabindex="-1"><a class="header-anchor" href="#src" aria-hidden="true">#</a> src</h3><ul><li>类型: <code>string</code></li><li>必填: 是</li></ul><p>视频源文件地址</p><h3 id="type" tabindex="-1"><a class="header-anchor" href="#type" aria-hidden="true">#</a> type</h3><ul><li>类型: <code>string</code></li><li>必填: 否</li></ul><p>视频类型</p><h3 id="title" tabindex="-1"><a class="header-anchor" href="#title" aria-hidden="true">#</a> title</h3><ul><li>类型: <code>string</code></li><li>必填: 否</li></ul><p>视频标题</p><h3 id="poster" tabindex="-1"><a class="header-anchor" href="#poster" aria-hidden="true">#</a> poster</h3><ul><li>类型: <code>string</code></li><li>必填: 否</li></ul><p>视频封面</p><h3 id="width" tabindex="-1"><a class="header-anchor" href="#width" aria-hidden="true">#</a> width</h3><ul><li>类型: <code>string | number</code></li><li>默认值: <code>&quot;100%&quot;</code></li></ul><p>播放器宽度</p><h3 id="height" tabindex="-1"><a class="header-anchor" href="#height" aria-hidden="true">#</a> height</h3><ul><li>类型: <code>string | number</code></li><li>必填: 否</li></ul><p>播放器高度</p><h3 id="ratio" tabindex="-1"><a class="header-anchor" href="#ratio" aria-hidden="true">#</a> ratio</h3><ul><li>类型: <code>string | number</code></li><li>默认值: <code>16:9</code></li></ul><p>播放器比例</p><h3 id="其他" tabindex="-1"><a class="header-anchor" href="#其他" aria-hidden="true">#</a> 其他</h3><p>ArtPlayer 组件还支持布尔属性。</p><p>你可以添加以下属性以启用相关功能:</p><ul><li>airplay</li><li>autoplay</li><li>aspect-ratio</li><li>auto-mini</li><li>auto-size</li><li>auto-orientation</li><li>auto-playback</li><li>fast-forward</li><li>flip</li><li>fullscreen-web</li><li>lock</li><li>loop</li><li>is-live</li><li>muted</li><li>mini-progress-bar</li><li>pip</li><li>screenshot</li><li>subtitle-offset</li></ul><p>你还可以添加以下属性来禁用相关功能：</p><ul><li>no-fullscreen</li><li>no-hotkey</li><li>no-playback-rate</li><li>no-setting</li><li>no-mutex</li><li>no-plays-inline</li></ul><h3 id="config" tabindex="-1"><a class="header-anchor" href="#config" aria-hidden="true">#</a> config</h3><ul><li><p>类型: <code>ArtPlayerOptions</code></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">type</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">Option</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">as</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">ArtPlayerInitOptions</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;artplayer/types/option.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">type</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">ArtPlayerOptions</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Partial</span><span style="color:#ABB2BF;">&lt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">Omit</span><span style="color:#ABB2BF;">&lt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">ArtPlayerInitOptions</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    | </span><span style="color:#98C379;">&quot;container&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    | </span><span style="color:#98C379;">&quot;url&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    | </span><span style="color:#98C379;">&quot;customType&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    | </span><span style="color:#98C379;">&quot;plugins&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    | </span><span style="color:#98C379;">&quot;contextmenu&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    | </span><span style="color:#98C379;">&quot;controls&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    | </span><span style="color:#98C379;">&quot;layers&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    | </span><span style="color:#98C379;">&quot;settings&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&gt;;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>必填: 否</p></li></ul><p>自定义 ArtPlayer。</p>`,32),N={href:"https://artplayer.org/document/start/option.html",target:"_blank",rel:"noopener noreferrer"},j=t(`<h3 id="customplayer" tabindex="-1"><a class="header-anchor" href="#customplayer" aria-hidden="true">#</a> customPlayer</h3><ul><li>类型: <code>(player: ArtPlayer) =&gt; Artplayer | void | Promise&lt;Artplayer&gt; | Promise&lt;void&gt;</code></li><li>必填: 否</li></ul><p>该函数接收当前 ArtPlayer 实例作为参数，因此你可以通过它进行自定义。</p><h2 id="全局配置" tabindex="-1"><a class="header-anchor" href="#全局配置" aria-hidden="true">#</a> 全局配置</h2><p>你可以通过插件选项中的 <code>componentOptions.artPlayer</code> 为所有 ArtPlayer 组件设置全局配置。</p><p>这是一个例子：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">componentsPlugin</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vuepress-plugin-components&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">plugins</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">componentsPlugin</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">componentOptions</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">artPlayer</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">fastForward</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">screenshot</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"><span style="color:#ABB2BF;">      },</span></span>
<span class="line"><span style="color:#ABB2BF;">    }),</span></span>
<span class="line"><span style="color:#ABB2BF;">  ],</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mse" tabindex="-1"><a class="header-anchor" href="#mse" aria-hidden="true">#</a> MSE</h2>`,8),L={href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Media_Source_Extensions_API",target:"_blank",rel:"noopener noreferrer"},S={href:"https://github.com/video-dev/hls.js",target:"_blank",rel:"noopener noreferrer"},T={href:"https://github.com/xqq/mpegts.js",target:"_blank",rel:"noopener noreferrer"},O={href:"https://github.com/Dash-Industry-Forum/dash.js",target:"_blank",rel:"noopener noreferrer"},U=s("p",null,"HLS",-1),K=t(`<div class="language-markdown" data-ext="md"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;ArtPlayer src=&quot;https://mse-demo.u2sb.com/dash/master.m3u8&quot; /&gt;</span></span>
<span class="line"></span></code></pre></div>`,1),H=s("p",null,"FLV",-1),V=t(`<div class="language-markdown" data-ext="md"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;ArtPlayer src=&quot;https://mse-demo.u2sb.com/caminandes_03_llamigos_720p.flv&quot; /&gt;</span></span>
<span class="line"></span></code></pre></div>`,1),z=s("p",null,"DASH",-1),R=t(`<div class="language-markdown" data-ext="md"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;ArtPlayer src=&quot;https://mse-demo.u2sb.com/dash/caminandes_03_llamigos_720p.mpd&quot; /&gt;</span></span>
<span class="line"></span></code></pre></div>`,1),$=t('<div class="hint-container tip"><p class="hint-container-title">提示</p><p>该组件可以自动识别具有 <code>m3u8</code>、<code>flv</code> 或 <code>mpd</code> 扩展名的链接。</p><p>在其他情况下，你应该手动将 <code>type</code> 设置为上述其中之一。</p></div><h2 id="高级用法" tabindex="-1"><a class="header-anchor" href="#高级用法" aria-hidden="true">#</a> 高级用法</h2><h3 id="额外的格式支持" tabindex="-1"><a class="header-anchor" href="#额外的格式支持" aria-hidden="true">#</a> 额外的格式支持</h3><p>你可以通过 <code>config</code> 属性在 ArtPlayer 选项中使用 <code>customType</code> 选项支持其他格式的视频。</p>',4),J=t(`<div class="language-html line-numbers-mode" data-ext="html"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">ArtPlayer</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#D19A66;">src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;https://mse-demo.u2sb.com/dash/master.m3u8&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#D19A66;">type</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;customHLS&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#D19A66;">:config</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;artPlayerConfig&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">artPlayerConfig</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">customType</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">customHLS</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">mediaElement</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">src</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">player</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">mediaElement</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">canPlayType</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;application/x-mpegURL&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">||</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">mediaElement</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">canPlayType</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;application/vnd.apple.mpegURL&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        ) {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">mediaElement</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">src</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">src</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">HLS</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">import</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hls.js/dist/hls.min.js&quot;</span><span style="color:#ABB2BF;">)).</span><span style="color:#E06C75;">default</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">hls</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">HLS</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">hls</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">attachMedia</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">mediaElement</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">hls</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">HLS</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Events</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">MEDIA_ATTACHED</span><span style="color:#ABB2BF;">, () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">hls</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">loadSource</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">src</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">          });</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">player</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;destroy&quot;</span><span style="color:#ABB2BF;">, () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">hls</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">destroy</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">          });</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">      },</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="添加插件" tabindex="-1"><a class="header-anchor" href="#添加插件" aria-hidden="true">#</a> 添加插件</h3><p>这是一个添加弹幕库插件的演示:</p>`,3),Q=t(`<div class="language-html line-numbers-mode" data-ext="html"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">ArtPlayer</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#D19A66;">src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;https://mse-demo.u2sb.com/caminandes_03_llamigos_720p.mp4&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#D19A66;">:config</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;artPlayerDanmukuConfig&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#D19A66;">:customPlayer</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;customPlayer&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">artplayerPluginDanmuku</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;artplayer-plugin-danmuku&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">DANMAKU_API</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;https://danmu.u2sb.com/api/artplayer/v1&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">DANMAKU_ID</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;jsdKLNMks21NMij&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BILIBILI_DANMAKU</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">\`</span><span style="color:#C678DD;">\${</span><span style="color:#E5C07B;">DANMAKU_API</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">/bilibili/BV1cs411Q7Ng/3.json\`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">danmukuOptions</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">danmuku</span><span style="color:#ABB2BF;">: () </span><span style="color:#C678DD;">=&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">allSettled</span><span style="color:#ABB2BF;">([</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">fetch</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BILIBILI_DANMAKU</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">res</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">json</span><span style="color:#ABB2BF;">()),</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">fetch</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">\`</span><span style="color:#C678DD;">\${</span><span style="color:#E5C07B;">DANMAKU_API</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">/</span><span style="color:#C678DD;">\${</span><span style="color:#E5C07B;">DANMAKU_ID</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">.json\`</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">res</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">json</span><span style="color:#ABB2BF;">()),</span></span>
<span class="line"><span style="color:#ABB2BF;">      ])</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">res</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">filter</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">r</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">r</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">status</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">===</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;fulfilled&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">r</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">r</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        )</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">res</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">res</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">filter</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">              (</span><span style="color:#E06C75;font-style:italic;">r</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E06C75;">r</span><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&quot;code&quot;</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">!==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&amp;&amp;</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E06C75;">r</span><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&quot;code&quot;</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">===</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&amp;&amp;</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E06C75;">r</span><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&quot;data&quot;</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">!==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&amp;&amp;</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E06C75;">r</span><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&quot;data&quot;</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span></span>
<span class="line"><span style="color:#ABB2BF;">            )</span></span>
<span class="line"><span style="color:#ABB2BF;">            .</span><span style="color:#61AFEF;">reduce</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">acc</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">cur</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">acc</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">concat</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cur</span><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&quot;data&quot;</span><span style="color:#ABB2BF;">]), [])</span></span>
<span class="line"><span style="color:#ABB2BF;">        ),</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">artPlayerDanmukuConfig</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">plugins</span><span style="color:#ABB2BF;">: [</span><span style="color:#61AFEF;">artplayerPluginDanmuku</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">danmukuOptions</span><span style="color:#ABB2BF;">)],</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">customPlayer</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">player</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">player</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;artplayerPluginDanmuku:emit&quot;</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">danmu</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">fetch</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">DANMAKU_API</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">method</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;POST&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">headers</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#98C379;">&quot;Content-Type&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;application/json&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">Accept</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;application/json&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">stringify</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">Id</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">DANMAKU_ID</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">Referer</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">location</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">origin</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">location</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">pathname</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          ...</span><span style="color:#E06C75;">danmu</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        }),</span></span>
<span class="line"><span style="color:#ABB2BF;">      });</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),W={__name:"artplayer.html",setup(G){const y={customType:{customHLS:async(o,a,p)=>{if(o.canPlayType("application/x-mpegURL")||o.canPlayType("application/vnd.apple.mpegURL"))o.src=a;else{const e=(await m(()=>import("./hls.min-c0f2426e.js").then(F=>F.h),["assets/hls.min-c0f2426e.js","assets/commonjsHelpers-725317a4.js"])).default,c=new e;c.attachMedia(o),c.on(e.Events.MEDIA_ATTACHED,()=>{c.loadSource(a)}),p.on("destroy",()=>{c.destroy()})}}}},r="https://danmu.u2sb.com/api/artplayer/v1",i="jsdKLNMks21NMij",d=`${r}/bilibili/BV1cs411Q7Ng/3.json`,u={plugins:[v({danmuku:()=>Promise.allSettled([fetch(d).then(o=>o.json()),fetch(`${r}/${i}.json`).then(o=>o.json())]).then(o=>o.filter(a=>a.status==="fulfilled").map(a=>a.value)).then(o=>o.filter(a=>a.code!==void 0&&a.code===0&&a.data!==void 0&&a.data.length>0).reduce((a,p)=>a.concat(p.data),[]))})]},A=o=>{o.on("artplayerPluginDanmuku:emit",a=>{fetch(r,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({Id:i,Referer:window.location.origin+window.location.pathname,...a})})})};return(o,a)=>{const p=B("ExternalLinkIcon"),e=B("ArtPlayer");return b(),C("div",null,[s("p",null,[n("在 Markdown 文件中嵌入 "),s("a",E,[n("ArtPlayer"),l(p)]),n("。")]),g(" more "),s("div",_,[D,s("p",null,[f,n(" 组件提供快速插入 "),s("a",q,[n("ArtPlayer"),l(p)]),n(" 播放器的能力，如果你需要高级用法你应该阅读 "),s("a",k,[n("ArtPlayer 文档"),l(p)]),n("。")])]),P,x,l(e,{src:"https://mse-demo.u2sb.com/caminandes_03_llamigos_720p.mp4"}),I,l(e,{src:"https://mse-demo.u2sb.com/caminandes_03_llamigos_720p.mp4",poster:"/poster.svg"}),w,l(e,{src:"https://mse-demo.u2sb.com/caminandes_03_llamigos_720p.mp4",airplay:"","aspect-ratio":"","auto-size":"","auto-orientation":"","auto-playback":"","fast-forward":"",flip:"","fullscreen-web":"",lock:"",loop:"","is-live":"",muted:"","mini-progress-bar":"",pip:"",screenshot:"","subtitle-offset":""}),M,s("p",null,[n("有关详细信息，请参阅 "),s("a",N,[n("ArtPlayer 文档"),l(p)])]),j,s("p",null,[n("MSE 全称 Media Source Extensions， 详见 "),s("a",L,[n("Media Source Extensions API"),l(p)]),n("。")]),s("p",null,[n("组件通过内置 "),s("a",S,[n("hls.js"),l(p)]),n("、 "),s("a",T,[n("mpegts.js"),l(p)]),n("、 "),s("a",O,[n("dash.js"),l(p)]),n(" 带来了了扩展的媒体支持。")]),s("ul",null,[s("li",null,[U,l(e,{src:"https://mse-demo.u2sb.com/dash/master.m3u8"}),K]),s("li",null,[H,l(e,{src:"https://mse-demo.u2sb.com/caminandes_03_llamigos_720p.flv"}),V]),s("li",null,[z,l(e,{src:"https://mse-demo.u2sb.com/dash/caminandes_03_llamigos_720p.mpd"}),R])]),$,l(e,{src:"https://mse-demo.u2sb.com/dash/master.m3u8",type:"customHLS",config:y}),J,l(e,{src:"https://mse-demo.u2sb.com/caminandes_03_llamigos_720p.mp4",config:u,customPlayer:A}),Q])}}},ls=h(W,[["__file","artplayer.html.vue"]]);export{ls as default};
